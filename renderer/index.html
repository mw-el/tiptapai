<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TipTap AI - Markdown Editor</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="app-layout">
    <!-- Sidebar mit File Tree -->
    <aside class="sidebar">
      <div class="sidebar-header">
        <button id="folder-up-btn" class="btn-icon" title="Eine Ebene nach oben">
          <span class="material-icons">arrow_upward</span>
        </button>
        <button id="recent-items-btn" class="btn-icon" title="Zuletzt geÃ¶ffnet">
          <span class="material-icons">history</span>
        </button>
        <button id="change-folder-btn" class="btn-icon" title="Ordner wechseln">
          <span class="material-icons">folder</span>
        </button>
        <button id="new-file-btn" class="btn-icon" title="Neue Datei erstellen">
          <span class="material-icons">note_add</span>
        </button>
      </div>
      <div id="recent-items-dropdown" class="recent-dropdown hidden">
        <!-- Wird dynamisch gefÃ¼llt -->
      </div>
      <div id="current-folder-display" class="current-folder-display">
        <span class="material-icons">folder_open</span>
        <span id="current-folder-name">Kein Ordner ausgewÃ¤hlt</span>
      </div>
      <div id="file-tree" class="file-tree">
        <!-- Wird dynamisch gefÃ¼llt -->
      </div>
      <!-- Table of Contents (Inhaltsverzeichnis) -->
      <div id="toc-container" class="toc-container hidden">
        <div id="toc-header" class="toc-header">
          <span class="material-icons">toc</span>
          <span class="toc-title">Inhalt</span>
          <span class="material-icons toc-toggle">expand_less</span>
        </div>
        <div id="toc-content" class="toc-content">
          <!-- Wird dynamisch gefÃ¼llt -->
        </div>
      </div>
    </aside>

    <!-- Editor Area -->
    <main class="editor-area">
      <!-- Editor Toolbar -->
      <div class="editor-toolbar">
        <button id="toggle-sidebar-btn" class="toolbar-btn" title="Dateibaum anzeigen/verbergen">
          <span class="material-icons">menu</span>
        </button>
        <button id="heading-btn" class="toolbar-btn" title="Ãœberschrift">
          <span class="material-icons">tag</span>
        </button>
        <div id="heading-dropdown" class="toolbar-dropdown hidden">
          <button data-level="1">H1</button>
          <button data-level="2">H2</button>
          <button data-level="3">H3</button>
          <button data-level="4">H4</button>
          <button data-level="5">H5</button>
          <button data-level="6">H6</button>
          <button data-level="0">Normal</button>
        </div>
        <button id="code-btn" class="toolbar-btn" title="Code-Format">
          <span class="material-icons">code</span>
        </button>
        <button id="shortcuts-btn" class="toolbar-btn" title="Tastenkombinationen">
          <span class="material-icons">help_outline</span>
        </button>
      </div>
      <!-- TipTap Editor Container -->
      <div id="editor"></div>
    </main>

    <!-- Control Panel (rechts) -->
    <aside class="control-panel">
      <div class="control-buttons">
        <select id="language-selector" class="control-btn" title="Sprache wÃ¤hlen">
          <option value="de-DE">ðŸ‡©ðŸ‡ª DE</option>
          <option value="de-CH">ðŸ‡¨ðŸ‡­ CH</option>
          <option value="en-US">ðŸ‡ºðŸ‡¸ EN</option>
        </select>
        <!-- System Indicator -->
        <div id="lt-system-indicator" class="system-indicator" title="LanguageTool System">
          <span class="system-label">...</span>
        </div>
        <!-- LanguageTool buttons - split toggle and refresh -->
        <div class="languagetool-controls">
          <button id="languagetool-toggle" class="control-btn active" title="LanguageTool ein/aus">
            <span class="material-icons">spellcheck</span>
          </button>
          <button id="languagetool-refresh" class="control-btn" title="Sichtbaren Bereich neu prÃ¼fen">
            <span class="material-icons">refresh</span>
          </button>
        </div>
        <button id="metadata-btn" class="control-btn" title="Metadata anzeigen">
          <span class="material-icons">info</span>
        </button>
        <button id="raw-btn" class="control-btn" title="Raw Markdown anzeigen">
          <span class="material-icons">code</span>
        </button>
        <button id="save-btn" class="control-btn" title="Speichern">
          <span class="material-icons">save</span>
        </button>
        <button id="save-as-btn" class="control-btn" title="Speichern unter...">
          <span class="material-icons">save_as</span>
        </button>
        <button id="rename-btn" class="control-btn" title="Datei umbenennen">
          <span class="material-icons">drive_file_rename_outline</span>
        </button>
        <button id="delete-btn" class="control-btn" title="Datei lÃ¶schen">
          <span class="material-icons">delete</span>
        </button>
        <button id="find-replace-btn" class="control-btn" title="Suchen & Ersetzen">
          <span class="material-icons">find_replace</span>
        </button>
      </div>
      <!-- Error List: Neu entdeckte Fehler nach Auto-Check -->
      <div id="error-list" class="error-list"></div>
      <!-- Status: Ganz unten, ohne Kasten -->
      <div id="save-status" class="save-status"></div>
    </aside>
  </div>

  <!-- Modal fÃ¼r Metadata -->
  <div id="metadata-modal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Frontmatter Metadata</h2>
        <button class="modal-close" onclick="closeModal('metadata-modal')">
          <span class="material-icons">close</span>
        </button>
      </div>
      <div class="modal-body">
        <div id="metadata-content" class="metadata-display"></div>
      </div>
    </div>
  </div>

  <!-- Modal fÃ¼r Raw Markdown (editierbar) -->
  <div id="raw-modal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Raw Markdown (Aktueller Absatz)</h2>
        <button class="modal-close" onclick="closeRawModal()">
          <span class="material-icons">close</span>
        </button>
      </div>
      <div class="modal-body">
        <textarea id="raw-content" spellcheck="false"></textarea>
      </div>
    </div>
  </div>

  <!-- Modal fÃ¼r LanguageTool KorrekturvorschlÃ¤ge -->
  <div id="languagetool-modal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>LanguageTool</h2>
        <button class="modal-close" onclick="closeModal('languagetool-modal')">
          <span class="material-icons">close</span>
        </button>
      </div>
      <div class="modal-body">
        <div id="languagetool-content"></div>
      </div>
    </div>
  </div>

  <!-- Modal fÃ¼r Find & Replace -->
  <div id="find-replace-modal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Suchen & Ersetzen</h2>
        <button class="modal-close" onclick="closeModal('find-replace-modal')">
          <span class="material-icons">close</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="find-replace-form">
          <div class="form-group">
            <label for="find-input">Suchen:</label>
            <input type="text" id="find-input" placeholder="Text zum Suchen...">
          </div>
          <div class="form-group">
            <label for="replace-input">Ersetzen durch:</label>
            <input type="text" id="replace-input" placeholder="Ersatztext...">
          </div>
          <div class="form-group checkbox-group">
            <label>
              <input type="checkbox" id="replace-eszett">
              ÃŸ durch ss ersetzen
            </label>
          </div>
          <div class="form-group checkbox-group">
            <label>
              <input type="checkbox" id="replace-quotation-marks">
              AnfÃ¼hrungszeichen korrigieren (Â« Â» oder â€ž ")
            </label>
          </div>
          <div class="form-group checkbox-group">
            <label>
              <input type="checkbox" id="replace-double-dash">
              Doppel-Bindestrich durch Gedankenstrich (-- â†’ â€”)
            </label>
          </div>
          <div class="form-group checkbox-group">
            <label>
              <input type="checkbox" id="replace-dash-spaces">
              Bindestrich mit AbstÃ¤nden durch Gedankenstrich ( - â†’ â€”)
            </label>
          </div>
          <div class="form-actions">
            <button id="find-next-btn" class="btn-primary">Weitersuchen</button>
            <button id="replace-btn" class="btn-primary">Ersetzen</button>
            <button id="replace-all-btn" class="btn-primary">Alle ersetzen</button>
          </div>
          <div id="find-replace-status" class="find-replace-status"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal fÃ¼r Tastenkombinationen -->
  <div id="shortcuts-modal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Tastenkombinationen</h2>
        <button class="modal-close" onclick="closeModal('shortcuts-modal')">
          <span class="material-icons">close</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="shortcuts-list">
          <h3>Ãœberschriften</h3>
          <div class="shortcut-item">
            <span class="shortcut-keys">Ctrl + Alt + 1-6</span>
            <span class="shortcut-desc">Ãœberschrift Ebene 1-6</span>
          </div>
          <div class="shortcut-item">
            <span class="shortcut-keys">Ctrl + Alt + 0</span>
            <span class="shortcut-desc">Normaler Text</span>
          </div>

          <h3>Textformatierung</h3>
          <div class="shortcut-item">
            <span class="shortcut-keys">Ctrl + B</span>
            <span class="shortcut-desc">Fett</span>
          </div>
          <div class="shortcut-item">
            <span class="shortcut-keys">Ctrl + I</span>
            <span class="shortcut-desc">Kursiv</span>
          </div>
          <div class="shortcut-item">
            <span class="shortcut-keys">Ctrl + Shift + C</span>
            <span class="shortcut-desc">Code (Inline)</span>
          </div>
          <div class="shortcut-item">
            <span class="shortcut-keys">Ctrl + Shift + X</span>
            <span class="shortcut-desc">Durchgestrichen</span>
          </div>

          <h3>Listen</h3>
          <div class="shortcut-item">
            <span class="shortcut-keys">Ctrl + Shift + 8</span>
            <span class="shortcut-desc">AufzÃ¤hlungsliste</span>
          </div>
          <div class="shortcut-item">
            <span class="shortcut-keys">Ctrl + Shift + 9</span>
            <span class="shortcut-desc">Nummerierte Liste</span>
          </div>

          <h3>Sonstiges</h3>
          <div class="shortcut-item">
            <span class="shortcut-keys">Ctrl + F</span>
            <span class="shortcut-desc">Suchen & Ersetzen</span>
          </div>
          <div class="shortcut-item">
            <span class="shortcut-keys">Ctrl + S</span>
            <span class="shortcut-desc">Speichern</span>
          </div>
          <div class="shortcut-item">
            <span class="shortcut-keys">Ctrl + Z</span>
            <span class="shortcut-desc">RÃ¼ckgÃ¤ngig</span>
          </div>
          <div class="shortcut-item">
            <span class="shortcut-keys">Ctrl + Shift + Z</span>
            <span class="shortcut-desc">Wiederherstellen</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal fÃ¼r Text-Input (ersetzt prompt()) -->
  <div id="input-modal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2 id="input-modal-title">Eingabe</h2>
        <button class="modal-close" onclick="closeModal('input-modal')">
          <span class="material-icons">close</span>
        </button>
      </div>
      <div class="modal-body">
        <input type="text" id="input-modal-field" style="width: 100%; padding: 8px; font-size: 14px;">
      </div>
      <div class="modal-footer" style="display: flex; justify-content: flex-end; gap: 10px; padding: 10px;">
        <button id="input-modal-cancel" class="control-btn">Abbrechen</button>
        <button id="input-modal-ok" class="control-btn" style="background: #4CAF50; color: white;">OK</button>
      </div>
    </div>
  </div>

  <script src="app.bundle.js"></script>
</body>
</html>
